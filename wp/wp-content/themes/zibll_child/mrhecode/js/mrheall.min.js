function handleCookie(e,t,n="",o=1){switch(e){case"set":try{var r=new Date;return r.setTime(r.getTime()+24*o*60*60*1e3),document.cookie=t+"="+encodeURIComponent(n)+"; expires="+r.toUTCString()+"; path=/; SameSite=Lax",!0}catch(e){return console.error("Cookie设置失败:",e),!1}case"get":try{var a=t+"=",i=document.cookie.split(";");for(let t=0;t<i.length;t++){let e=i[t];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return null}catch(e){return console.error("Cookie获取失败:",e),null}case"isValid":return null!==handleCookie("get",t);default:return console.error("未知的Cookie操作类型"),null}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".captchsubmit").forEach(function(o){o.addEventListener("click",function(e){var t=o.getAttribute("form-action"),n=o.closest(".line-form").querySelector(".sign_nonce");n?fetch("/wp-admin/admin-ajax.php?action=get_sign_nonce&action_name="+t).then(e=>e.json()).then(e=>{e.success&&(n.value=e.data)}):console.error("没有找到对应的 sign_nonce 隐藏字段")})})}),function(r){"use strict";function n(){r("img[switch-src]").each(function(){var e=r(this),t=e.attr("src"),n=e.attr("switch-src");e.attr("src",n),e.attr("switch-src",t)})}function e(){try{var e,t,n,o,r,a,i,s=window._mrhe?.OFFICIALSITE||[];s&&0!==s.length&&(e=s.map(e=>e.domain).filter(Boolean),window.location.href,t=window.location.hostname,o=(n=e.map(e=>{try{return new URL(e).hostname}catch{return null}}).filter(Boolean)).includes(t),r=["localhost","127.0.0.1"].includes(t),o||r||confirm(`⚠️ 域名安全警告

    `+`您当前访问的域名：${t}
    `+`官方域名：${n.join(", ")}
    
    `+`您可能正在访问非官方网站，存在安全风险！
    
    `+`点击 "确定" 跳转到官方网站
    `+'点击 "取消" 继续访问当前网站（不推荐）')&&(a=window.location.pathname+window.location.search+window.location.hash,i=e[0]+a,window.location.href=i))}catch(e){console.warn("域名检测失败:",e)}}/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&r("a").removeAttr("target"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),r(document).ready(function(){function e(){var e=(new Date).getHours(),t=handleCookie("get","theme_mode")||"white-theme",e=7<e&&e<22?"white-theme":"dark-theme";"true"!==handleCookie("get","toggle-theme")&&t!==e&&(handleCookie("set","theme_mode",e,1),n(),"dark-theme"==e?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"),notyf(`已切换为${"dark-theme"==e?"夜间":"白天"}模式`))}var t;(t=window.matchMedia("(prefers-color-scheme: dark)")).media?t.addEventListener("change",e=>{handleCookie("set","theme_mode",e.matches?"dark-theme":"white-theme",1),e.matches?(document.body.classList.add("dark-theme"),notyf("已切换为夜间模式")):(document.body.classList.remove("dark-theme"),notyf("已切换为白天模式")),n()}):"true"!==handleCookie("get","toggle-theme")&&setInterval(e,6e4),r(".toggle-theme").click(function(){handleCookie("set","toggle-theme","true",1)});{const o=window._mrhe?.TRANSLATION;o&&o.enabled&&((t=document.createElement("script")).src=o.cdn_url,t.onload=function(){var n;"undefined"==typeof translate?console.error("translate.js 加载失败"):(translate.service.use(o.service),translate.language.setLocal(o.default_language),o.auto_detect&&translate.setAutoDiscriminateLocalLanguage(),o.translate_js&&translate.listener.start(),translate.selectLanguageTag.show=!1,o.ignore&&(o.ignore.tags&&0<o.ignore.tags.length&&o.ignore.tags.forEach(function(e){e&&e.trim()&&translate.ignore.tag.push(e.trim())}),o.ignore.classes&&0<o.ignore.classes.length&&o.ignore.classes.forEach(function(e){e&&e.trim()&&translate.ignore.class.push(e.trim())}),o.ignore.ids&&0<o.ignore.ids.length&&o.ignore.ids.forEach(function(e){e&&e.trim()&&translate.ignore.id.push(e.trim())}),o.ignore.texts&&0<o.ignore.texts.length&&o.ignore.texts.forEach(function(e){e&&e.trim()&&translate.ignore.text.push(e.trim())}),o.ignore.regexs)&&0<o.ignore.regexs.length&&(n=[],o.ignore.regexs.forEach(function(t){if(t&&t.trim())try{var e=new RegExp(t.trim(),"g");n.push(e)}catch(e){console.warn("无效的正则表达式:",t,e)}}),0<n.length)&&translate.ignore.setTextRegexs(n),translate.execute(),"undefined"!=typeof jQuery&&jQuery(document).ajaxComplete(function(){setTimeout(function(){"undefined"!=typeof translate&&translate.execute&&translate.execute()},100)}))},t.onerror=function(){console.error("translate.js 加载失败")},document.head.appendChild(t))}})}(jQuery);