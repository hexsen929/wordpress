$.fn.waterfall=function(){function t(t){if(!t.length)return;const a=t.find(".card");if(!a.length)return;const n=t.width(),e=a.eq(0).outerWidth(),s=Math.floor(n/e);var i=parseInt(t.data("h-gap")),o=parseInt(t.data("v-gap"));i||(i=parseInt(a.eq(0).css("margin-left"))+parseInt(a.eq(0).css("margin-right"))),o||(o=parseInt(a.eq(0).css("margin-top"))+parseInt(a.eq(0).css("margin-bottom")));const r=a.eq(0).offset().top-t.offset().top-parseInt(a.eq(0).css("margin-top"));let f=new Array(s).fill(r);a.each(function(){const t=$(this),a=Math.min(...f),n=f.indexOf(a),s=n*e+i*n,r=a+(a>0?o:0);t.css({position:"absolute",left:"0",top:"0",transform:"translate3d("+s+"px,"+r+"px,0)"}).addClass("waterfall-item"),f[n]+=t.height()+o}),t.css("height",Math.max(...f)+o+"px")}this.each(function(){var a=$(this);t(a),a.data("waterfall-init")||(a.data("waterfall-init",!0),$(window).on("resize",debounce(function(){t(a)},100)),a.on("lazyloaded","img",debounce(function(){t(a)},50)),a.on("post_ajax.ed",function(){t(a)}))})};